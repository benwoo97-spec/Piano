<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Muscle Quiz</title>
<style>
  body { font-family: Arial; text-align:center; margin:20px; }
  #card { border:2px solid #333; border-radius:10px; padding:20px; margin:20px auto; width:400px; }
  .hidden { display:none; }
  button { margin:10px; padding:10px 20px; border-radius:8px; cursor:pointer; }
  #result { margin-top:20px; text-align:left; }
  #timer { font-size:18px; margin:10px 0; }
</style>
</head>
<body>
<h1>Muscle Quiz</h1>
<div>
  <button onclick="startQuiz(10)">10 Questions</button>
  <button onclick="startQuiz(allMuscles.length)">All Questions (26)</button>
</div>

<div id="card" class="hidden">
  <h2 id="muscleName"></h2>
  <div id="answer" class="hidden"></div>
  <div id="timer">30</div>
  <button id="showAnswerBtn" onclick="showAnswer()">Show Answer</button>
  <div>
    <button id="correctBtn" class="hidden" onclick="markAnswer(true)">✓ Correct</button>
    <button id="wrongBtn" class="hidden" onclick="markAnswer(false)">✗ Wrong</button>
  </div>
  <button id="nextBtn" class="hidden" onclick="nextQuestion()">Next</button>
</div>

<div id="result" class="hidden">
  <h2>Quiz Finished!</h2>
  <p id="score"></p>
  <div id="wrongList"></div>
  <button onclick="location.reload()">Restart</button>
</div>

<script>
const allMuscles = [
  { name:"Gluteus Maximus", origin:"Ilium, sacrum, coccyx, sacrotuberous ligament", insertion:"Gluteal tuberosity, iliotibial tract", action:"Hip ER, EXT", nerve:"VR L5-S2 Inferior gluteal n.", perfusion:"Superior & Inferior gluteal aa/vv" },
  { name:"Gluteus Medius", origin:"Anterior & Posterior gluteal lines", insertion:"Greater trochanter", action:"Hip IR, ABD, stabilization", nerve:"VR L4-S1 Superior gluteal n.", perfusion:"Superior gluteal aa/vv" },
  { name:"Gluteus Minimus", origin:"Anterior & Inferior gluteal lines", insertion:"Greater trochanter", action:"Hip IR, ABD, stabilization", nerve:"VR L4-S1 Superior gluteal n.", perfusion:"Superior gluteal aa/vv" },
  { name:"Piriformis", origin:"Anterior sacrum, sacrotuberous ligament", insertion:"Greater trochanter", action:"Hip ER", nerve:"VR S1-S2 n. to piriformis", perfusion:"Superior & Inferior gluteal aa/vv" },
  { name:"Superior Gemellus", origin:"Ischial Spine", insertion:"Greater trochanter via obturator internus tendon", action:"Hip ER", nerve:"VR L5-S2 n. to superior gemellus", perfusion:"Inferior gluteal aa/vv" },
  { name:"Obturator Internus", origin:"Ischiopubic ramus, obturator membrane", insertion:"Greater trochanter", action:"Hip ER, ABD", nerve:"VR L5-S2 n. to obturator internus", perfusion:"Inferior gluteal aa/vv" },
  { name:"Inferior Gemellus", origin:"Ischial tuberosity", insertion:"Greater trochanter via obturator internus tendon", action:"Hip ER", nerve:"VR L4-S1 n. to inferior gemellus", perfusion:"Inferior gluteal aa/vv" },
  { name:"Quadratus Femoris", origin:"Ischial tuberosity", insertion:"Intertrochanteric crest", action:"Hip ER", nerve:"VR L4-S1 n. to quadratus femoris", perfusion:"Inferior gluteal aa/vv" },
  { name:"Iliopsoas", origin:"Iliac fossa, Ala sacrum, T12-L5", insertion:"Lesser trochanter", action:"Hip FLX", nerve:"VR L2-L4 femoral n.", perfusion:"Femoral aa/vv" },
  { name:"Sartorius", origin:"ASIS", insertion:"Pes Anserine", action:"Hip FLX, ER, ABD + Leg IR, FLX", nerve:"VR L2-L4 femoral n.", perfusion:"Femoral aa/vv" },
  { name:"Rectus Femoris", origin:"AIIS", insertion:"Base of patella, tibial tuberosity", action:"Hip FLX, Leg EXT", nerve:"VR L2-L4 femoral n.", perfusion:"Femoral aa/vv" },
  { name:"Vastus Medialis", origin:"Linea aspera", insertion:"Medial patella, tibial tuberosity", action:"Leg EXT", nerve:"VR L2-L4 femoral n.", perfusion:"Femoral aa/vv" },
  { name:"Vastus Lateralis", origin:"Linea aspera, greater trochanter", insertion:"Lateral patella, tibial tuberosity", action:"Leg EXT", nerve:"VR L2-L4 femoral n.", perfusion:"Femoral aa/vv" },
  { name:"Vastus Intermedius", origin:"Upper shaft femur", insertion:"Upper patella, tibial tuberosity", action:"Leg EXT", nerve:"VR L2-L4 femoral n.", perfusion:"Femoral aa/vv" },
  { name:"Articularis Genu", origin:"Distal femur", insertion:"Suprapatellar bursa", action:"Pulls suprapatellar tendon superiorly", nerve:"VR L2-L4 femoral n.", perfusion:"Femoral aa/vv" },
  { name:"Pectineus", origin:"Pectineal line pubis", insertion:"Pectineal line femur", action:"Hip FLX, ADD", nerve:"VR L2-L4 femoral n. + VR L2-L4 obturator n.", perfusion:"Femoral & Obturator aa/vv" },
  { name:"Adductor Magnus", origin:"Ischial tuberosity & ramus", insertion:"Linea Aspera, Adductor tubercle", action:"Hip ADD, EXT, FLX", nerve:"VR L2-L4 Obturator n. + VR L4-S3 Tibial division of sciatic n.", perfusion:"Obturator & Profundus femoris aa/vv" },
  { name:"Adductor Longus", origin:"Body of pubis", insertion:"Linea Aspera", action:"Hip ADD, FLX", nerve:"VR L2-L4 Obturator n.", perfusion:"Obturator aa/vv" },
  { name:"Adductor Brevis", origin:"Inferior pubic ramus", insertion:"Linea Aspera, Pectineal line", action:"Hip ADD, FLX", nerve:"VR L2-L4 Obturator n.", perfusion:"Obturator aa/vv" },
  { name:"Gracilis", origin:"Inferior pubic ramus", insertion:"Pes Anserine", action:"Hip ADD, FLX + Leg FLX, IR", nerve:"VR L2-L4 Obturator n.", perfusion:"Obturator aa/vv" },
  { name:"Obturator Externus", origin:"Margin obturator foramen", insertion:"Intertrochanteric fossa femur", action:"Hip ER", nerve:"VR L2-L4 Obturator n.", perfusion:"Obturator aa/vv" },
  { name:"Tensor Fascia Latae", origin:"Iliac crest, ASIS", insertion:"Iliotibial tract", action:"Hip FLX, IR, ABD", nerve:"VR L4-S1 Superior gluteal n.", perfusion:"Superior gluteal aa/vv" },
  { name:"Semitendinosus", origin:"Ischial tuberosity", insertion:"Pes Anserine", action:"Hip EXT + Leg FLX, IR", nerve:"VR L4-S3 Tibial division of sciatic n.", perfusion:"Profundus femoris aa/vv" },
  { name:"Semimembranosus", origin:"Ischial tuberosity", insertion:"Medial tibial condyle", action:"Hip EXT + Leg FLX, IR", nerve:"VR L4-S3 Tibial division of sciatic n.", perfusion:"Profundus femoris aa/vv" },
  { name:"Biceps Femoris Long Head", origin:"Ischial tuberosity", insertion:"Head of fibula", action:"Hip EXT + Leg FLX, ER", nerve:"VR L4-S3 Tibial division of sciatic n.", perfusion:"Profundus femoris aa/vv" },
  { name:"Biceps Femoris Short Head", origin:"Linea Aspera", insertion:"Head of fibula", action:"Leg FLX, ER", nerve:"VR L4-S3 Common fibular division of sciatic n.", perfusion:"Profundus femoris aa/vv" }
];

let quizMuscles = [];
let current = 0;
let timer = null;
let timeLeft = 30;
let wrongAnswers = [];

function startQuiz(num){
  quizMuscles = [...allMuscles].sort(()=>0.5-Math.random()).slice(0,num);
  current=0; wrongAnswers=[];
  document.getElementById("result").classList.add("hidden");
  document.getElementById("card").classList.remove("hidden");
  showQuestion();
}

function showQuestion(){
  const m = quizMuscles[current];
  document.getElementById("muscleName").innerText = m.name;
  document.getElementById("answer").classList.add("hidden");
  document.getElementById("showAnswerBtn").classList.remove("hidden");
  document.getElementById("correctBtn").classList.add("hidden");
  document.getElementById("wrongBtn").classList.add("hidden");
  document.getElementById("nextBtn").classList.add("hidden");
  if(timer){ clearInterval(timer); timer=null; }
  timeLeft=30; document.getElementById("timer").innerText=timeLeft;
  timer=setInterval(()=>{ if(timeLeft<=0){ clearInterval(timer); } else { timeLeft--; document.getElementById("timer").innerText=timeLeft; }},1000);
}

function showAnswer(){
  if(timer){ clearInterval(timer); timer=null; }
  const m=quizMuscles[current];
  document.getElementById("answer").innerHTML=
    `<p><b>Origin:</b> ${m.origin}</p>
     <p><b>Insertion:</b> ${m.insertion}</p>
     <p><b>Action:</b> ${m.action}</p>
     <p><b>Nerve:</b> ${m.nerve}</p>
     <p><b>Perfusion:</b> ${m.perfusion}</p>`;
  document.getElementById("answer").classList.remove("hidden");
  document.getElementById("showAnswerBtn").classList.add("hidden");
  document.getElementById("correctBtn").classList.remove("hidden");
  document.getElementById("wrongBtn").classList.remove("hidden");
}

function markAnswer(correct){
  if(timer){ clearInterval(timer); timer=null; }
  if(!correct) wrongAnswers.push(quizMuscles[current]);
  document.getElementById("correctBtn").classList.add("hidden");
  document.getElementById("wrongBtn").classList.add("hidden");
  document.getElementById("nextBtn").classList.remove("hidden");
}

function nextQuestion(){
  current++;
  if(current>=quizMuscles.length){ finishQuiz(); } else { showQuestion(); }
}

function finishQuiz(){
  if(timer){ clearInterval(timer); timer=null; }
  document.getElementById("card").classList.add("hidden");
  document.getElementById("result").classList.remove("hidden");
  document.getElementById("score").innerText=`You got ${quizMuscles.length - wrongAnswers.length} / ${quizMuscles.length} correct.`;
  if(wrongAnswers.length>0){
    let html="<h3>Wrong Answers:</h3><ul>";
    wrongAnswers.forEach(m=>{ html+=`<li><b>${m.name}</b><br>Origin: ${m.origin}<br>Insertion: ${m.insertion}<br>Action: ${m.action}<br>Nerve: ${m.nerve}<br>Perfusion: ${m.perfusion}</li>` });
    html+="</ul>"; document.getElementById("wrongList").innerHTML=html;
  } else { document.getElementById("wrongList").innerHTML="<p>Perfect! ✅</p>"; }
}
</script>
</body>
</html>

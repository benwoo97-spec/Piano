<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Muscle Flashcards</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
    #card { border: 2px solid #333; border-radius: 10px; padding: 20px; margin: 20px auto; width: 400px; }
    .hidden { display: none; }
    button { margin: 10px; padding: 10px 20px; border-radius: 8px; cursor: pointer; }
    #result { margin-top: 20px; }
    #wrongList { text-align: left; margin-top: 20px; }
  </style>
</head>
<body>
  <h1>Muscle Flashcards</h1>
  <div>
    <button onclick="startQuiz(10)">10 Questions</button>
    <button onclick="startQuiz(20)">20 Questions</button>
    <button onclick="startQuiz(allMuscles.length)">All Questions</button>
  </div>

  <div id="card" class="hidden">
    <h2 id="muscleName"></h2>
    <div id="answer" class="hidden"></div>
    <div id="timer">30</div>
    <button id="showAnswerBtn" onclick="showAnswer()">Show Answer</button>
    <div>
      <button id="correctBtn" class="hidden" onclick="markAnswer(true)">✓ Correct</button>
      <button id="wrongBtn" class="hidden" onclick="markAnswer(false)">✗ Wrong</button>
    </div>
    <button id="nextBtn" class="hidden" onclick="nextQuestion()">Next</button>
  </div>

  <div id="result" class="hidden">
    <h2>Quiz Finished!</h2>
    <p id="score"></p>
    <div id="wrongList"></div>
    <button onclick="location.reload()">Restart</button>
  </div>

  <script>
    const allMuscles = [
      { name: "Gluteus Maximus", origin: "Ilium, sacrum, coccyx, sacrotuberous ligament", insertion: "Gluteal tuberosity, iliotibial tract (IT Band)", action: "Hip ER, EXT", nerve: "Inferior gluteal n. (VR L5-S2)", perfusion: "Superior & Inferior gluteal aa/vv." },
      { name: "Gluteus Medius", origin: "Anterior and Posterior gluteal lines (Ilium)", insertion: "Greater trochanter", action: "Hip IR, ABD, stabilization", nerve: "Superior gluteal n. (VR L4-S1)", perfusion: "Superior gluteal aa/vv." },
      { name: "Gluteus Minimus", origin: "Anterior and Inferior gluteal lines (Ilium)", insertion: "Greater trochanter", action: "Hip IR, ABD, stabilization", nerve: "Superior gluteal n. (VR L4-S1)", perfusion: "Superior gluteal aa/vv." },
      { name: "Piriformis", origin: "Anterior sacrum, sacrotuberous ligament", insertion: "Greater trochanter (upper end)", action: "Hip ER", nerve: "n. to piriformis (VR S1-S2)", perfusion: "Superior & Inferior gluteal aa/vv." },
      { name: "Tensor Fascia Latae", origin: "Iliac crest, ASIS", insertion: "Iliotibial tract", action: "Hip FLX, IR, ABD, stabilization", nerve: "Superior gluteal n. (VR L4-S1)", perfusion: "Superior gluteal aa/vv." },
      { name: "Iliopsoas", origin: "Iliac fossa, Ala of sacrum, TP & bodies of T12-L5", insertion: "Lesser trochanter", action: "Hip FLX", nerve: "Femoral n. (VR L2-L4)", perfusion: "Femoral aa/vv." },
      { name: "Rectus Femoris", origin: "AIIS, rim of acetabulum", insertion: "Base of patella, tibial tuberosity", action: "Hip FLX, leg EXT", nerve: "Femoral n. (VR L2-L4)", perfusion: "Femoral aa/vv." },
      { name: "Sartorius", origin: "ASIS", insertion: "Pes Anserine (medial tibia)", action: "Hip FLX, ER, ABD + Leg IR, FLX", nerve: "Femoral n. (VR L2-L4)", perfusion: "Femoral aa/vv." },
      { name: "Adductor Longus", origin: "Body of pubis", insertion: "Linea aspera", action: "Hip ADD, FLX", nerve: "Obturator n. (VR L2-L4)", perfusion: "Obturator aa/vv." },
      { name: "Biceps Femoris (Long Head)", origin: "Ischial tuberosity", insertion: "Head of fibula", action: "Hip EXT, Leg FLX, ER", nerve: "Tibial division of sciatic n. (VR L4-S3)", perfusion: "Profundus femoris aa/vv." },
      // ... (생략된 나머지 근육도 같은 형식으로 다 넣을 수 있음)
    ];

    let quizMuscles = [];
    let current = 0;
    let timer;
    let timeLeft = 30;
    let wrongAnswers = [];

    function startQuiz(num) {
      quizMuscles = [...allMuscles]
        .sort(() => 0.5 - Math.random())
        .slice(0, num);
      current = 0;
      wrongAnswers = [];
      document.getElementById("result").classList.add("hidden");
      document.getElementById("card").classList.remove("hidden");
      showQuestion();
    }

    function showQuestion() {
      const m = quizMuscles[current];
      document.getElementById("muscleName").innerText = m.name;
      document.getElementById("answer").classList.add("hidden");
      document.getElementById("showAnswerBtn").classList.remove("hidden");
      document.getElementById("correctBtn").classList.add("hidden");
      document.getElementById("wrongBtn").classList.add("hidden");
      document.getElementById("nextBtn").classList.add("hidden");
      timeLeft = 30;
      document.getElementById("timer").innerText = timeLeft;
      clearInterval(timer);
      timer = setInterval(countdown, 1000);
    }

    function countdown() {
      if (timeLeft <= 0) {
        clearInterval(timer);
        autoWrong();
      } else {
        document.getElementById("timer").innerText = --timeLeft;
      }
    }

    function showAnswer() {
      const m = quizMuscles[current];
      document.getElementById("answer").innerHTML = `
        <p><b>Origin:</b> ${m.origin}</p>
        <p><b>Insertion:</b> ${m.insertion}</p>
        <p><b>Action:</b> ${m.action}</p>
        <p><b>Nerve:</b> ${m.nerve}</p>
        <p><b>Perfusion:</b> ${m.perfusion}</p>`;
      document.getElementById("answer").classList.remove("hidden");
      document.getElementById("showAnswerBtn").classList.add("hidden");
      document.getElementById("correctBtn").classList.remove("hidden");
      document.getElementById("wrongBtn").classList.remove("hidden");
    }

    function markAnswer(correct) {
      clearInterval(timer);
      if (!correct) wrongAnswers.push(quizMuscles[current]);
      document.getElementById("correctBtn").classList.add("hidden");
      document.getElementById("wrongBtn").classList.add("hidden");
      document.getElementById("nextBtn").classList.remove("hidden");
    }

    function autoWrong() {
      wrongAnswers.push(quizMuscles[current]);
      showAnswer();
      document.getElementById("correctBtn").classList.add("hidden");
      document.getElementById("wrongBtn").classList.add("hidden");
      document.getElementById("nextBtn").classList.remove("hidden");
    }

    function nextQuestion() {
      current++;
      if (current >= quizMuscles.length) {
        finishQuiz();
      } else {
        showQuestion();
      }
    }

    function finishQuiz() {
      document.getElementById("card").classList.add("hidden");
      document.getElementById("result").classList.remove("hidden");
      document.getElementById("score").innerText = `You got ${quizMuscles.length - wrongAnswers.length} / ${quizMuscles.length} correct.`;
      if (wrongAnswers.length > 0) {
        let html = "<h3>Wrong Answers:</h3><ul>";
        wrongAnswers.forEach(m => {
          html += `<li><b>${m.name}</b><br>
          Origin: ${m.origin}<br>
          Insertion: ${m.insertion}<br>
          Action: ${m.action}<br>
          Nerve: ${m.nerve}<br>
          Perfusion: ${m.perfusion}</li><br>`;
        });
        html += "</ul>";
        document.getElementById("wrongList").innerHTML = html;
      } else {
        document.getElementById("wrongList").innerHTML = "<p>Perfect! No mistakes ✅</p>";
      }
    }
  </script>
</body>
</html>
